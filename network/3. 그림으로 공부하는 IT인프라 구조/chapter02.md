# 2. 서버를 열어 보자 

## 2.1. 물리 서버
### 2.1.1. 서버 외관과 설치 장소
- 서버는 랙(Rack)이라는 것에 장착
- 서버 랙에도 규격이 있음
	- 대부분은 19인치
	- 높이는 약 4.5cm로 40~46개 칸으로 이루어져 있음
### 2.1.2. 서버 내부 구성
- 컴포넌트를 연결하는 선을 버스(Bug)라고 함
- 서버와 PC는 물리적으로 기본 구성이 같음
- 각 하드웨어 제조사가 경쟁하는 것은 CPU나 메모리 등의 컴퍼넌트 자체를 개선하거나 
컴퍼넌트 배치나 버스 구성, 하드웨어를 가동시키기 위한 펨웨어를 개선해서 성능을 차별화하는 것
## 2.2. CPU
- CPU는 Central Processing Unit 약자, 서버 중심에 위치해서 연산 처리를 실시함
- CPU는 명령을 받아서 연산을 실행하고 결과를 반환(연산은 1초에 10억 회 이상 실행)
## 2.3. 메모리 
- CPU 옆에 위치하며, CPU에 전달하는 내용이나 데이터를 저장하거나 처리 결과를 받음
- CPU 자체도 메모리를 가지고 있음(레지스터)
	- L1, L2 캐시라고 불리며, CPU 내부에 존재
	- 메모리보다 빠르지만, 용량이 메모리에 비해 매우 작음
- 메모리에는 미리 데이터를 CPU에 전달해서 처리 지연을 줄이는 '메모리 인터리빙'이라는 기능이 있음
- 대부분의 데이터가 연속해서 엑세스되는 규칙을 기반으로 여러 채널을 사용해서 데이터를 미리 가져옴
- 메모리는 다단계 구조를 가지고 각각의 엑세스 속도에 맞게 사용되기 때문에 CPU의 데이터 처리 속도를 줄일 수 있음
## 2.4. I/O 장치
### 2.4.1. 하드 디스크 드라이브(HDD)
- 서버에서는 메모리에 비해 CPU에서 떨어진 곳에 HDD가 배치, 주로 장기 저장 목적의 데이터 저장 장소로 사용
- HDD는 자기 원반이 여러 개 들어 있으며, 이것을 고속으로 회전해서 읽기/쓰기 처리를 함
	- 회전 구조 떄문에 속도가 물리 법칙에 좌우되며, 메모리처럼 순식간에 접근할 수 없음
- HDD가 많이 탑재되어 있는 하드웨어를 '스토리지'라고 함
	- 스토리지는 I/O의 서브 시스템이라고 불리는 장치로서, 내부에는 CPU와 캐시가 존재하고 수 많은 HDD 외에도 여러 기능을 탑재
	- 서버와 I/O 시에는 HDD가 직접 데이터 교환을 하는 것이 아니라 캐시를 통해서 함
	- 대형 스토리지와 연결할 때는 일반적으로 '파이버 채널(Fibre Channel, FC)'이라는 케이블을 사용해서
	SAN(Storage Area Network)라는 네트워크를 경유
- Write Back
	- 읽기 캐시의 경우 캐시상에 데이터 복사본만 있으면 되지만, 쓰기 시에는 캐시에서만 데이터를 기록하고 
	완료했다고 간주하는 경우 데이터를 읽을 가능성이 있음을 의미
	- 장점은 캐시에 저장해서 쓰기 처리가 종료되기 때문에 고속 I/O를 실현할 수 있다는 점
	- 대부분의 저장소 제품에서는 이 캐시를 별도의 캐시와 미러링해서 안정성을 높임
- Write Through
	- 캐시와 HDD에 액세스하는 I/O
	- 읽기 시에 캐시에 데이터가 없으면 읽기 처리를 위해 액세스 함
	- 쓰기 시에는 캐시와 디스크를 모두 읽어서 라이트 백과 비교하고, 더 확실한 쪽에 처리를 실시하기 위해 액세스 함,
	이 경우 쓰기 캐시의 장점은 없음
### 2.4.2. 네트워크 인터페이스
- 네트워크 인터페이스는 서버와 외부 장비를 연결하기 위한 것으로 외부 접속용 인터페이스
## 2.5. 버스
### 2.5.1. 대역
- IT 인프라에서 대역은 데이터 전송 능력을 의미(한번에 데이터를 보낼 수 있는 데이터의 폭)
### 2.5.2. 버스 대역
- CPU에 가까운 쪽이 전송량이 큼
- 버스 흐름에서 중요한 것은 CPU와 장치 사이에 병목 현상이 없어야 함(병목 현상은 데이터 전송이 어떤 이유로 막혀 있는 상태)
> SAS의 다음 세대  
SSD 규격은 SATA, SAS, NVMe로 오른쪽으로 갈수록 속도가 빠름 (NVMe는 SATA와 비교해 약 다섯 배정도 빠른 전송 속도를 가지고 있음)

