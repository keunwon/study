# 14. 디버깅과 트러블슈팅

## 14.1. 접근 로그 설정
- $time_local: 서버가 요청받은 시점의 로컬 시간
- $remote_user: 연결 맺은 IP 주소
- $realip_remote_addr: 실제 클라이언트 IP 주소
- $proxy_protocol_server로 시작되는 변수들은 proxy_protocol 매개변수가 server 컨텍스트의 수신 설정에서 
사용될 때 프록시 프로토콜 헤더로부터 획득한 정보를 담고 있음
- $remote_user: 인증에 사용된 사용자명
- $geoip_로 시작하는 변수를 통해 사용자 IP에 대한 국가, 지역, 도시 정보를 확인
- $http_x_forwarded_for: X-Forwarded-For 헤더값 (사용자의 요청이 프록시를 경유한 요청인지 확인하기 위해 사용)
- 'log_format' 지시자는 http 컨텍스트에서만 유효
## 14.2. 오류 로그 설정
- error_log 지시자의 매개변수 중 로그 파일의 경로는 필수지만 로그 레벨은 옵션이며 기본값은 error
- 오류 로그는 엔진엑스 설정이 의도한 대로 동작하지 않을 때 가장 먼저 살펴봐야 하는 로그
## 14.3. 로그를 Syslog로 전달
- 'error_log', 'accesss_log' 지시자를 사용해 로그를 Syslog 리스너로 전달함
## 14.5. 엔진엑스를 위한 오픈트레이싱
- nginx는 Jaeger, Zipkin을 이요하여 오픈트레이싱 사용
- 오픈트레이싱 셋업이 별거 아닌 듯 보일 수 있지만 분산 서버 환경에서 성능과 트랜잭션을 모니터링하는데 매우 중요하고 의미있음
> 오픈트레이싱: 애플리케이션 간 분산 추적을 위한 표준
