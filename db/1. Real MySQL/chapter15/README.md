# 15. 데이터 타입

## 1. 문자열(CHAR와 VARCHAR)
### 1.1. 저장 공간
- CHAR, VARCHAR의 가장 큰 공통점은 문자열을 저장할 수 있는 데이터 타입, 가장 큰 차이는 고정 길이인지 가변 길이인지 여부
    - 고정 길이
        - 실제 입력되는 컬럼 값의 길이에 따라 사용하는 저장 공간의 크가 변하지 않음
        - 실제 저장된 값의 유효 크가 얼마인지 별도로 저장할 필요가 없으므로 추가 공간이 필요하지 않음
    - 가변 길이
        - 최대로 저장할 수 있는 값의 길이는 제ㄴ돼 있지만, 그 이하 크기의 값이 저장되면 그만큼 저장공간이 줄어듬
        -  VARCHAR 타입은 저장된 값의 유효 크기가 얼마인지를 별도로 저장해 둬야 하므로 1 ~ 2 바이트의 저장공간이 추가로 필요
    - MYSQL에서는 하나의 레코드에서 TEXT, BLOB 타입을 제외한 컬럼의 전체 크기가 66KB를 초가할 수 없음
    - 문자열 값의 길이가 항상 일정하다면 CHAR, 가변적이라면 VARCHAR를 시용
### 1.2. 비교 방식
- CHAR, VARCHAR 비교 방식은 거의 같음
- CHAR, VARCHAR 비교 시 뒤에 공백은 제거하고 비교
- LIKE를 사용한 문자열 패턴 비교에서는 공백 문자가 유효 문자로 취급 
### 1.4. 콜레이션(Collation)
- 콜레이션은 문자열 컬럼의 값에 대한 비교나 정렬 순서를 위한 규칙
- 조인하는 양쪽 테이블의 컬럼이 문자집합이나 콜레이션이 다르다면 비교 작업에서 콜레이션의 변환이 필이요하기 때문에 인덱스를 효율적으로 이용하지 못할 때가 많으므로 주의해야 함

## 2. 숫자
- 저장되는 포멧에 따라 십진 표기법(Decimal)과 이진 표기법으로 나눠 볼 수 있음
    - 이진 표기법
        - MYSQL의 INTEGER or BIGINT 등 대부분의 숫자 타입은 모두 이진 표기
    - 십진 표기법(Decimal)
        - 숫자 값의 각 자리 값을 표시하기 위해 4비트나 한 바이트를 사용해서 표기하는 방법
        - 소수점까지 관래돼야 하는 값을 저장할 때 사용
### 2.1. 정수
- UNSIGNED라는 컬럼 욥션을 사용 가능
- UNSIGNED 옵션은 조인할 때 인덱스의 사용 여부에까지 여향을 미치지 않음
### 2.2. 부동 소수점
- 부동 소수점을 저장하기 위해 FLOAT or DOUBLE 타입을 사용
- 부동 소수점을 사용하면 정확한 유효 소수점 값을 식별하기 어려움
- 근사값을 저장하는 방식이라서 동등 비교는 사용할 수 없음
### 2.3. DECIMAL
- 금액이나 대출이자 등과 같이 고정된 소수점까지만 정확하게 관리 시 DECIMAL을 사용

## 3. 날짜와 시간
- DATETIME, DATE 타입은 현재 DBMS 커넥션의 타임존에 관계없이 클라인트로부터 입력된 값을 그대로 저장
- TIMESTAMP UTC 타입존으로 저장되므로 타임존이 달라져도 값이 자동으로 보정

## 4. ENUM과 SET
### 4.1. ENUM
- ENUM 타입은 반드시 하나의 값만 저정할 수 있음
### 4.2. SET
- SET은 하나의 컬럼에 1개 이상의 값을 저장할 수 있음
- ','로 구분해서 문자열 값을 나열해서 입력
- SET 타입의 컬럼에 인덱스가 있더라도 동등 비교 조건을 제외하고 FIND_IN_SET() 함수나 LIKE를 사용하는 쿼리는 인덱스를 사용할 수 없음

## 5. TEXT, BLOB
- MYSQL에서 대량의 데이터를 저장하려면 TEXT or BLOB 타입을 사용해야 함
    - TEXT: 문자열을 저장하는 대용량 컬럼 (별도의 CHARSET, COLLATE를 가짐)
    - BLOB: 이진 데이터 타입
- 레코드의 전체 크기가 64KB 넘지 않는 한도 내에서는 VARCHAR or VARNINARY의 길이는 제한이 없음
- BLOB or TEXT 타입의 컬럼에 인덱스를 생성할 때는 컬럼 값의 몇 바이트까지 인덱스를 생성할 것인지를 명시해야 할 때도 있음
- 임시 테이블에 사용시 BLOB or TEXT 타입은 디스크를 사용 (메모리 영역 사용 X)
- 만약 대용량 BLOB이나 TEXT 컬럼을 사용하는 쿼리가 있다면 MYSQL 서버의 max_allowd_packet 시스템 설정을 필요한 만큼 충분히 늘려 주는 것이 좋음

## 6. 공간(Spatial) 데이터 타입
### 6.1. POINT 타입
- X, Y 좌표로만 구성된 하나의 점 정보를 저장할 수 있는 타입
### 6.2. LINESTRING 타입
- 하나의 직선뿐 아니라 여러 개의 꺽임이 있는 연결된 선도 모두 저장
### 6.3. POLYGON 타입
- 다각형을 저장할 수 있는 데이터 타입
- 다각형이란 반드시 시작 시점과 종료 지점이 일치하는 닫힌 도형을 의미

