# 5. 프로세스 동기화

## 프로세스 간 통신 (IPC)
### 프로세스 간 통신의 개념
- 프로세스는 독립적으로 실행되기도 하고 데이터를 주고받으며 협업하기도 함
- 프로세스 내부 데이터 통신: 하나의 프로세스 내에 두개 이상의 스레드가 존재하는 경우의 통신
- 프로세스 간 데이터 통신: 같은 컴퓨터에 있는 프로세스들 끼리 통신하는 경우, 공용 파일 또는 운영체제가 제공하는 파이프를 사용하여 통신
- 네트워크를 이용한 데이터 통신: 여러 컴퓨터가 네트워크에 연결되어 있을때 프로세스는 소켓을 이용하여 데이터를 주고받음
### 프로세스 간 통신의 분류
- 양방향 통신: 데이터를 동시에 양쪽 방향으로 전송할 수 있는 구조 (프로세스간 소켓 통신)
- 반양방향 통신: 데이터를 양쪽 방향으로 전송할 수 있지만 동시 전송은 불가능하고 특정 시점에 한 방향으로만 전송할 수 있는 구조 (무전기)
- 단방향 통신: 한쪽 방향으로 데이터를 전송할 수 있는 구조 (프로세스 간 통신에서는 전역 변수와 파이프가 이에 해당)

## 공유 주언과 임계 구역
### 공유 자원의 접근
- 공유자원은 여러 프로세스가 공동으로 이용하는 변수, 메모리, 파일 등을 말함
### 임계구역 (critical section)
- 공유 자원 접근 순서에 따라 실행 결과가 달라지는 프로그램의 영역을 임계구역

## 임계구역 해결 방법
- 가장 단순한 방법은 'lock'을 이용
- 상호 배제
    - 한 프로세스가 임계 구역에 들어가면 다른 프로세스는 들어갈 수 없음
- 한정 대기
    - 한 프로세스가 무한으로 대기하지 않아야함
- 진행의 융통성
    - 한 프로세스가 다른 프로세스의 진행을 방해해서는 안됌
### 하드웨어적인 해결 방법
- lock: 프로세스가 락을 획득해야함
### 세마포어
- 공유 자원에 세마포어의 변수만큼의 프로세스(or쓰레드)에 접근 함
- 다른 프로세스가 현재 실행 중인 세마포어를 해제할 수 있음
### 뮤텍스
- 오직 1개의 프로세스(or쓰레드)만 접근 할 수 있음
- 락(lock)을 획득한 프로세스가 반드시 그 락을 해제해야 함
### 모니터
- 모니터는 공유 자원을 내부적으로 숨기고 공유 자원에 접근하기 위한 인터페이스만 제공하여 자원을 보호하고 프로세스 간의 동기화를 시킴
- 작동 원리
    - 입계 구역에서 저장된 변수나 자원에 접근하고자 하는 프로세스는 모니터에 작업 요청을 함
    - 모니터는 요청받은 작업을 모니터 큐에 저장 후 순서대로 처리, 그 결과를 해당 프로세스에 알려줌
- 모니터는 임계구역 보호와 동기화를 위해서 내부적을 상태 변수를 사용
    - 상태변수에는 wait()와 signla() 기능이 있음
    - wait(): 모니터 큐에서 자신의 차례가 올 때까지 기다린다
    - signal(): 모니터 큐에서 기다리는 다음 프로세스에 순서를 넘겨줌