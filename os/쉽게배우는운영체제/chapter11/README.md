# 11. 파일 시스템

## 파일과 파일 시스템
### 파일 시스템의 개념
- 파일을 보관하고 괄하는 파일 관리자를 두어 저장장치의 전체 관리를 맡기는데 이를 **파일 시스템**이라고 함
- 파일 관리자가 파일 테이블을 사용하여 파일을 관리함 (생성, 수정, 삭제 등)
### 블록과 파일 테이블
- 블록은 저장장치에서 사용하는 가장 작은 단위로 하나의 블록에 주소 하나가 할당
- 블록의 크기를 작게 사용하면 내부 단편화 현상이 줄어들어 저장장치를 효율적으로 사용하지만 파일이 여러 블록으로 나누어져 파일 입출력 속도가 느리다 (큰 파일을 많이 사용할 때는 블록의 크기를 크게 잡는 것이 좋음)
### 파일 분류와 확장자
- 운영체제에서는 크게 실행 파일과 데이터 파일로 나뉨
    - 실행 파일: 운영체제가 메모리로 가져와 CPU를 이용하여 작업을 하는 파일
    - 데이터 파일: 실행 파일이 작업하는데 필요한 데이터를 모아놓은 파일 (이미지 뷰어의 사진 파일, 뮤직 플레이어의 음악 파일, 워드프레서의 문서 파일 등)
- 파일 헤더에는 파일의 이름, 버전, 크기, 생성 일자, 접근 권한 등의 정보 저장
### 파일 속성
- 파일 속성은 각 파일 헤더에 기록되며 운영체제는 이러한 파일 헤더를 파일 테이블에 관리
- 고정 헤더를 사용하여 운영체제에서 관리하는 파일 헤더가가 아닌 데이터 파일 잔신에게 필요한 파일 속성들을 저장할 수 있음
### 파일 구조
- 순차 파일 구조
    - 파일 내용이 하나의 긴 줄로 늘어선 형태 (카세트)
- 인덱스 파일 구조
    - 순차 파일 구조에 인덱스 테이블을 추가하여 순차 접근과 직접 접근이 가능
    - 인덱스 테이블을 여러 개 만들면 다양한 접근이 가능함
    - B 트리를 이용하여 인덱스를 구성
- 직접 파일 구조
    - 저장하려는 데이터의 특정 값에 어떤 관계를 정의하여 물리적인 주소로 바로 변환하는 파일 구조
    - 햄시 함수를 이용하여 주소를 변환하기 때문에 데이터 접근이 매우 빠름
    - 저장 공간이 낭비되는 문제가 발생할 수 있음

## 디스크 파일 할당
### 연속 할당과 불연속 할당
- 연속 할당: 파일을 구성하는 데이터를 디스크상에 연속적으로 배열하는 간단한 방식
- 불연속 할당: 비어 있는 블록에 데이터를 분산하여 저장하고 이에 관한 정보를 파일 시스템이 관리하는 방식 (연결 할당, 인덱스 할당)
### 연결 할당
- 파일에 속한 데이터를 연결 리스트로 관리하는 방식
- 파일테이블에는 시작 블록에 대한 정보만 저장
- 최대 할당 크기가 정해져 있는 단점이 있음
### 인덱스 할당
- 최대 할당 크기에 제한없이 사용이 가능
- 인덱스 할당 방식은 파일 테이블의 블록 포인터가 데이터 블록을 연결하는 것이 아니라 데이터의 인덱스를 담고 있는 인덱스 블록을 연결함
- 인덱스 블록은 실제 데이터의 위치에 관한 정보를 순서대로 보관하고 있음